# Metrics Sidecar

## é¡¹ç›®èƒŒæ™¯

åœ¨é«˜è´Ÿè½½çš„Kubernetesç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ç€ä¸€ä¸ªæ™®éè€Œæ£˜æ‰‹çš„æŒ‘æˆ˜ï¼š**å¦‚ä½•æ™ºèƒ½åœ°ç®¡ç†èµ„æºè¿‡è½½Podçš„æµé‡ï¼Ÿ** å½“æŸä¸ªPodçš„èµ„æºä½¿ç”¨ç‡é£™å‡æ—¶ï¼Œç»§ç»­å‘å…¶åˆ†å‘è¯·æ±‚å¾€å¾€ä¼šå¯¼è‡´æœåŠ¡è´¨é‡ä¸¥é‡ä¸‹é™ï¼Œç”šè‡³å¼•å‘è¿é”æ•…éšœã€‚ä¼ ç»Ÿçš„Kubernetesæœºåˆ¶åœ¨è¿™æ–¹é¢å­˜åœ¨æ˜æ˜¾ä¸è¶³ã€‚

**âš ï¸ ç°å®ç—›ç‚¹**
- ğŸ”¥ **èµ„æºçƒ­ç‚¹é—®é¢˜**ï¼šé«˜è´Ÿè½½Podç»§ç»­æ¥æ”¶æµé‡ï¼Œå¯¼è‡´å“åº”æ—¶é—´å‰§å¢ï¼Œç”¨æˆ·ä½“éªŒè¿…é€Ÿæ¶åŒ–
- â±ï¸ **æ‰©å®¹æ»åæ•ˆåº”**ï¼šHPAè™½èƒ½æ°´å¹³æ‰©å±•èµ„æºï¼Œä½†éš¾ä»¥å³æ—¶è§£å†³å·²è¿‡è½½å®ä¾‹çš„é—®é¢˜
- ğŸ”„ **å¤æ‚è§£å†³æ–¹æ¡ˆ**ï¼šæœåŠ¡ç½‘æ ¼ç­‰é«˜çº§æ–¹æ¡ˆè™½æœ‰æ•ˆï¼Œä½†å¼•å…¥è¿‡å¤šå¤æ‚æ€§å’Œèµ„æºå¼€é”€

**ğŸš€ åˆ›æ–°è§£å†³æ–¹æ¡ˆ**  
Metrics Sidecar æä¾›äº†ä¸€ç§ä¼˜é›…ä¸”è½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒå·§å¦™åœ°ç»“åˆäº†KubernetesåŸç”Ÿèƒ½åŠ›ä¸èµ„æºæ„ŸçŸ¥é€»è¾‘ï¼š

- åˆ©ç”¨Kubernetesçš„`readinessProbe`æœºåˆ¶å®ç°æ— ä¾µå…¥å¼æµé‡æ§åˆ¶
- é€šè¿‡metrics-serverå®æ—¶ç›‘æ§å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
- åŸºäºæ™ºèƒ½ç®—æ³•å’Œéšæœºé€€é¿ç­–ç•¥ç¡®ä¿æœåŠ¡å¼¹æ€§å’Œå¯ç”¨æ€§
- é›¶ä»£ç ä¿®æ”¹ï¼Œä½œä¸ºSidecarå®¹å™¨å³æ’å³ç”¨

è¿™ä¸€è®¾è®¡ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿè‡ªåŠ¨å¯¹èµ„æºå‹åŠ›åšå‡ºååº”ï¼Œåœ¨èµ„æºç´§å¼ æ—¶ä¸»åŠ¨å‡å°‘æµé‡è´Ÿæ‹…ï¼Œå®ç°çœŸæ­£çš„èµ„æºè‡ªé€‚åº”æµé‡ç®¡ç†ã€‚

---

KubernetesæŒ‡æ ‡æ”¶é›†å·¥å…·ï¼Œç”¨äºç›‘æ§Podå’Œå®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚é€‚åˆä½œä¸ºsidecarå®¹å™¨éƒ¨ç½²ï¼Œæä¾›èµ„æºç›‘æ§å’Œå¥åº·æ£€æŸ¥æ¥å£ã€‚

## ğŸ” æ ¸å¿ƒåŠŸèƒ½

- ğŸ“Š **èµ„æºæ™ºèƒ½ç›‘æ§**ï¼šé€šè¿‡metrics-server APIå®æ—¶è¿½è¸ªPodå’Œå®¹å™¨çš„CPUã€å†…å­˜ä½¿ç”¨çŠ¶å†µ
- ğŸš¦ **è‡ªé€‚åº”å¥åº·æ£€æŸ¥**ï¼šæä¾›æ™ºèƒ½`/healthz`æ¥å£ï¼Œæ ¹æ®èµ„æºä½¿ç”¨ç‡åŠ¨æ€è°ƒæ•´Podå¯ç”¨æ€§
- ğŸ›ï¸ **çµæ´»é˜ˆå€¼é…ç½®**ï¼šæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡ç²¾ç»†è°ƒæ•´èµ„æºé˜ˆå€¼å’ŒæœåŠ¡ä¿æŠ¤ç­–ç•¥
- ğŸ”§ **å¤šåœºæ™¯é€‚é…**ï¼šæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶çµæ´»å®šåˆ¶å„ç§è¿è¡Œå‚æ•°
- ğŸŒ **åŒæ¨¡å¼éƒ¨ç½²**ï¼šåŒæ—¶æ”¯æŒKubernetesé›†ç¾¤å†…ï¼ˆInClusterï¼‰å’Œé›†ç¾¤å¤–çš„è¿è¡Œç¯å¢ƒ

## âš™ï¸ å·¥ä½œåŸç†

1. ğŸ”„ ä½œä¸ºsidecarå®¹å™¨ä¸ä¸»åº”ç”¨éƒ¨ç½²åœ¨åŒä¸€Podä¸­
2. ğŸ“ˆ æŒç»­ç›‘æ§å¹¶æ”¶é›†ç›®æ ‡å®¹å™¨çš„èµ„æºä½¿ç”¨æŒ‡æ ‡
3. ğŸš¦ é€šè¿‡`/healthz`æ¥å£æ™ºèƒ½æ§åˆ¶æµé‡ï¼š
   - å½“CPUå’Œå†…å­˜åŒæ—¶è¶…è¿‡é…ç½®é˜ˆå€¼æ—¶ï¼Œå¯åŠ¨éšæœºé€€é¿æœºåˆ¶
   - éšæœºé€€é¿ç¡®ä¿æœ€å°‘æœ‰`MINIMUM_PODS_TO_KEEP_PERCENT`æ¯”ä¾‹çš„Podä¿æŒæœåŠ¡
   - èµ„æºä½¿ç”¨æ­£å¸¸æˆ–Podå¯ç”¨ç‡ä½äºä¿æŠ¤é˜ˆå€¼æ—¶ä¿æŒæœåŠ¡å¯ç”¨
4. ğŸ“‹ é€šè¿‡`/metrics`æ¥å£æä¾›å®Œæ•´çš„èµ„æºä½¿ç”¨è¯¦æƒ…ï¼Œä¾¿äºç›‘æ§å’Œåˆ†æ

## ğŸ”„ éšæœºé€€é¿æœºåˆ¶

ä¸ºé¿å…èµ„æºè¿‡è½½æ—¶æœåŠ¡å®Œå…¨ä¸å¯ç”¨ï¼ŒMetrics Sidecarå®ç°äº†æ™ºèƒ½çš„éšæœºé€€é¿ç­–ç•¥ï¼š

1. ğŸ” **èµ„æºç›‘æµ‹**ï¼šå½“æ£€æµ‹åˆ°å®¹å™¨CPUå’Œå†…å­˜åŒæ—¶è¶…è¿‡é¢„è®¾é˜ˆå€¼æ—¶è§¦å‘
2. ğŸ² **éšæœºå†³ç­–**ï¼šç³»ç»Ÿä¸ºæ¯ä¸ªPodç”Ÿæˆ0-100ä¹‹é—´çš„éšæœºå€¼
3. ğŸ§® **æ™ºèƒ½æ¯”è¾ƒ**ï¼šå°†éšæœºå€¼ä¸`MINIMUM_PODS_TO_KEEP_PERCENT`è¿›è¡Œå¯¹æ¯”
   - éšæœºå€¼ > é˜ˆå€¼ï¼šPodæ ‡è®°ä¸ºä¸å¥åº·ï¼Œæš‚æ—¶æ‹’ç»æ–°æµé‡
   - éšæœºå€¼ â‰¤ é˜ˆå€¼ï¼šPodä¿æŒå¥åº·çŠ¶æ€ï¼Œç»§ç»­æœåŠ¡
4. ğŸ›¡ï¸ **æœåŠ¡ä¿æŠ¤**ï¼šç¡®ä¿å³ä½¿åœ¨æç«¯å‹åŠ›ä¸‹ï¼ŒæœåŠ¡æ•´ä½“ä»ç„¶å¯ç”¨
5. ğŸŒŠ **æµé‡å¹³æ»‘**ï¼šéšç€Podé‡å¯æˆ–èµ„æºé‡Šæ”¾ï¼Œç³»ç»Ÿè‡ªåŠ¨æ¢å¤å¹³è¡¡çŠ¶æ€

è¿™ç§æœºåˆ¶ç‰¹åˆ«é€‚åˆå¤„ç†æµé‡çªå¢ã€èµ„æºç´§å¼ çš„åœºæ™¯ï¼Œé€šè¿‡ç‰ºç‰²éƒ¨åˆ†å®ä¾‹çš„å¯ç”¨æ€§æ¥ä¿éšœæ•´ä½“æœåŠ¡çš„ç¨³å®šæ€§å’Œå“åº”é€Ÿåº¦ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

é¡¹ç›®é‡‡ç”¨è§„èŒƒçš„Goæ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼š

```
.
â”œâ”€â”€ cmd/                      # å‘½ä»¤è¡Œç¨‹åºå…¥å£
â”‚   â””â”€â”€ metrics-sidecar/      # ä¸»åº”ç”¨å…¥å£ç‚¹
â”‚       â””â”€â”€ main.go           # ç¨‹åºä¸»å…¥å£
â”œâ”€â”€ pkg/                      # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ config/               # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ handlers/             # HTTPå¤„ç†å™¨æ¨¡å—
â”‚   â”œâ”€â”€ k8s/                  # Kuberneteså®¢æˆ·ç«¯
â”‚   â””â”€â”€ metrics/              # æŒ‡æ ‡æ”¶é›†ä¸å¤„ç†
â”œâ”€â”€ kubernetes/               # K8séƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ rbac.yaml             # å‘½åç©ºé—´çº§æƒé™
â”‚   â””â”€â”€ cluster-rbac.yaml     # é›†ç¾¤çº§æƒé™é…ç½®
â”œâ”€â”€ Dockerfile                # å®¹å™¨æ„å»ºå®šä¹‰
â”œâ”€â”€ go.mod                    # Goæ¨¡å—ä¾èµ–
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ æ„å»ºä¸è¿è¡Œ

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# æ„å»ºåº”ç”¨
go build -o metrics-sidecar ./cmd/metrics-sidecar

# æœ¬åœ°è¿è¡Œï¼ˆéœ€è¦kubeconfigæ–‡ä»¶ï¼‰
./metrics-sidecar
```

### å®¹å™¨ç¯å¢ƒ

```bash
# æ„å»ºDockeré•œåƒ
docker build -t metrics-sidecar:latest .

# å¤–éƒ¨æ¨¡å¼è¿è¡Œå®¹å™¨
docker run -v $HOME/.kube/config:/app/kube-config.yaml metrics-sidecar:latest
```

## ğŸ“‹ å‰ç½®ä¾èµ–

- âœ… Kubernetesé›†ç¾¤å·²å®‰è£…metrics-serverç»„ä»¶
- âœ… ç›®æ ‡å®¹å™¨å·²è®¾ç½®èµ„æºé™åˆ¶ï¼ˆresources.limitsï¼‰
- âœ… å·²é…ç½®é€‚å½“çš„RBACæƒé™ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰

### metrics-serverå®‰è£…æŒ‡å—

<details>
<summary>å±•å¼€æŸ¥çœ‹å®‰è£…æ–¹æ³•</summary>

1. **ä½¿ç”¨Helmå®‰è£…**:
   ```bash
   helm repo add metrics-server https://kubernetes-sigs.github.io/metrics-server/
   helm upgrade --install metrics-server metrics-server/metrics-server --namespace kube-system
   ```

2. **ä½¿ç”¨YAMLæ–‡ä»¶å®‰è£…**:
   ```bash
   kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
   ```

3. **Minikubeç¯å¢ƒ**:
   ```bash
   minikube addons enable metrics-server
   ```
</details>

## ğŸ”Œ Kubernetesé›†æˆ

åœ¨Kubernetesä¸­ï¼Œé€šè¿‡ä»¥ä¸‹é…ç½®å°†Metrics Sidecaræ·»åŠ åˆ°ç°æœ‰éƒ¨ç½²ä¸­ï¼š

```yaml
apiVersion: apps/v1
kind: Deployment
spec:
  template:
    spec:
      # æŒ‡å®šServiceAccount
      serviceAccountName: metrics-sidecar
      containers:
      - name: main-app
        # ä¸»åº”ç”¨å®¹å™¨é…ç½®...
        
      - name: metrics-sidecar
        image: metrics-sidecar:latest
        ports:
        - containerPort: 8333
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: DEPLOYMENT_NAME
          value: "your-deployment-name"
        - name: CONTAINER_NAME
          value: "main-app"
        - name: RESOURCE_THRESHOLD_MEMORY_PERCENT
          value: "80"
        - name: RESOURCE_THRESHOLD_CPU_PERCENT
          value: "80"
        - name: MINIMUM_PODS_TO_KEEP_PERCENT
          value: "30"
        
      # é…ç½®ä¸»åº”ç”¨çš„å°±ç»ªæ¢é’ˆæŒ‡å‘sidecarçš„å¥åº·æ£€æŸ¥æ¥å£
      readinessProbe:
        httpGet:
          path: /healthz
          port: 8333
        initialDelaySeconds: 10
        periodSeconds: 15
        timeoutSeconds: 5
        failureThreshold: 2
        successThreshold: 1
```

## âš™ï¸ é…ç½®å‚æ•°

é€šè¿‡ç¯å¢ƒå˜é‡å¯çµæ´»é…ç½®Metrics Sidecarçš„è¡Œä¸º:

| å‚æ•°åç§° | æè¿° | é»˜è®¤å€¼ |
|:-------:|:-----|:-----:|
| `NAMESPACE` | Kuberneteså‘½åç©ºé—´ | test-sp |
| `DEPLOYMENT_NAME` | è¦ç›‘æ§çš„Deploymentåç§° | aliexpress |
| `CONTAINER_NAME` | è¦ç›‘æ§çš„å®¹å™¨åç§° | aliexpress |
| `POD_NAME` | è¦ç›‘æ§çš„Podåç§° | aliexpress-6c7687ddb-gh5mb |
| `RESOURCE_THRESHOLD_MEMORY_PERCENT` | å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦é˜ˆå€¼(%) | 80 |
| `RESOURCE_THRESHOLD_CPU_PERCENT` | CPUä½¿ç”¨ç‡å‘Šè­¦é˜ˆå€¼(%) | 80 |
| `MINIMUM_PODS_TO_KEEP_PERCENT` | æœ€å°å¯ç”¨Podç™¾åˆ†æ¯”å’Œéšæœºé€€é¿é˜ˆå€¼(%) | 50 |
| `HTTP_PORT` | HTTPæœåŠ¡ç›‘å¬ç«¯å£ | 8333 |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« (debug, info, warn, error) | info |

### ğŸ”„ MINIMUM_PODS_TO_KEEP_PERCENTå‚æ•°è¯¦è§£

`MINIMUM_PODS_TO_KEEP_PERCENT`å‚æ•°å…·æœ‰åŒé‡åŠŸèƒ½ï¼š

1. **ğŸ›¡ï¸ æœ€å°å¯ç”¨Podä¿æŠ¤**ï¼šå½“éƒ¨ç½²ä¸­å¯ç”¨Podç™¾åˆ†æ¯”ä½äºæ­¤å€¼æ—¶ï¼Œå³ä½¿èµ„æºè¿‡è½½ï¼Œä¹Ÿä¼šä¿æŒPodå¥åº·çŠ¶æ€
2. **âš–ï¸ éšæœºé€€é¿é˜ˆå€¼**ï¼šèµ„æºè¿‡è½½æ—¶ï¼Œçº¦æœ‰æ­¤ç™¾åˆ†æ¯”çš„Podä¼šä¿æŒå¥åº·çŠ¶æ€ç»§ç»­æœåŠ¡

ä¾‹å¦‚ï¼Œè®¾ç½®ä¸º30%æ„å‘³ç€ï¼š
- å½“éƒ¨ç½²ä¸­å¯ç”¨Podå°‘äºæ€»æ•°30%æ—¶ï¼Œæ‰€æœ‰Podéƒ½ä¼šä¿æŒå¥åº·çŠ¶æ€
- èµ„æºè¿‡è½½æ—¶ï¼Œå¤§çº¦30%çš„Podä¼šç»§ç»­æ¥æ”¶æµé‡ï¼Œå…¶ä½™70%å°†æš‚æ—¶æ‹’ç»æ–°è¯·æ±‚

## ğŸ§ª å•å…ƒæµ‹è¯•

é¡¹ç›®åŒ…å«å…¨é¢çš„å•å…ƒæµ‹è¯•å¥—ä»¶ï¼Œç¡®ä¿æ ¸å¿ƒåŠŸèƒ½ç¨³å®šå¯é ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./...

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
go test ./pkg/config/
go test ./pkg/metrics/
go test ./pkg/handlers/

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
go test -cover ./...

# ç”Ÿæˆè¯¦ç»†è¦†ç›–ç‡æŠ¥å‘Š
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html
```

### æµ‹è¯•èŒƒå›´

âœ… **é…ç½®ç®¡ç†**ï¼šéªŒè¯ç¯å¢ƒå˜é‡è§£æå’Œé»˜è®¤å€¼æœºåˆ¶  
âœ… **æŒ‡æ ‡æ”¶é›†**ï¼šæµ‹è¯•èµ„æºæŒ‡æ ‡çš„æ”¶é›†å’Œå¤„ç†é€»è¾‘  
âœ… **å¥åº·æ£€æŸ¥**ï¼šéªŒè¯å„ç§èµ„æºä½¿ç”¨åœºæ™¯ä¸‹çš„å¥åº·çŠ¶æ€åˆ¤æ–­  
âœ… **è®¡ç®—å‡½æ•°**ï¼šæµ‹è¯•èµ„æºæ¯”ä¾‹å’Œé˜ˆå€¼è®¡ç®—çš„å‡†ç¡®æ€§  

## ğŸ” RBACæƒé™é…ç½®

Metrics Sidecaréœ€è¦ç‰¹å®šçš„Kubernetesæƒé™æ‰èƒ½è®¿é—®Podã€Deploymentä¿¡æ¯å’Œmetrics-serveræ•°æ®ã€‚

<details>
<summary><b>ğŸ’¼ å‘½åç©ºé—´çº§åˆ«æƒé™</b> (å•ä¸€å‘½åç©ºé—´ç›‘æ§)</summary>

é€‚ç”¨äºåªç›‘æ§å•ä¸ªå‘½åç©ºé—´å†…çš„åº”ç”¨åœºæ™¯ã€‚åˆ›å»ºå¹¶åº”ç”¨ä»¥ä¸‹èµ„æºï¼š

```bash
kubectl apply -f kubernetes/rbac.yaml
```

è¿™å°†åˆ›å»ºï¼š
- **ServiceAccount**: `metrics-sidecar`
- **Role**: å…·æœ‰è®¿é—®ç‰¹å®šå‘½åç©ºé—´å†…èµ„æºçš„æƒé™
- **RoleBinding**: å°†Roleç»‘å®šåˆ°ServiceAccount
</details>

<details>
<summary><b>ğŸŒ é›†ç¾¤çº§åˆ«æƒé™</b> (å¤šå‘½åç©ºé—´ç›‘æ§)</summary>

é€‚ç”¨äºéœ€è¦ç›‘æ§å¤šä¸ªå‘½åç©ºé—´çš„åœºæ™¯ã€‚åˆ›å»ºå¹¶åº”ç”¨ä»¥ä¸‹èµ„æºï¼š

```bash
kubectl apply -f kubernetes/cluster-rbac.yaml
```

è¿™å°†åˆ›å»ºï¼š
- **ServiceAccount**: `metrics-sidecar-cluster`ï¼ˆåœ¨monitoringå‘½åç©ºé—´ä¸­ï¼‰
- **ClusterRole**: å…·æœ‰è®¿é—®æ‰€æœ‰å‘½åç©ºé—´èµ„æºçš„æƒé™
- **ClusterRoleBinding**: å°†ClusterRoleç»‘å®šåˆ°ServiceAccount
</details>

åœ¨éƒ¨ç½²æ—¶ï¼Œç¡®ä¿æŒ‡å®šæ­£ç¡®çš„ServiceAccountï¼š

```yaml
spec:
  template:
    spec:
      serviceAccountName: metrics-sidecar  # æˆ– metrics-sidecar-cluster
```

## ğŸ“Š æ¢é’ˆæœºåˆ¶ä¼˜åŒ–

é€šè¿‡ç²¾ç»†è°ƒæ•´readinessProbeå‚æ•°ï¼Œå¯ä»¥å®ç°æ›´æ™ºèƒ½çš„æµé‡æ§åˆ¶ï¼š

| å‚æ•° | æè¿° | æ¨èå€¼ |
|:----:|:-----|:-----:|
| **initialDelaySeconds** | å®¹å™¨å¯åŠ¨åé¦–æ¬¡æ£€æŸ¥çš„ç­‰å¾…æ—¶é—´ | 10-30ç§’ |
| **periodSeconds** | æ‰§è¡Œæ£€æŸ¥çš„é¢‘ç‡ | 10-15ç§’ |
| **timeoutSeconds** | æ£€æŸ¥è¶…æ—¶æ—¶é—´ | 3-5ç§’ |
| **failureThreshold** | è¿ç»­å¤±è´¥æ¬¡æ•°é˜ˆå€¼ | 2-3æ¬¡ |
| **successThreshold** | æ¢å¤æ‰€éœ€è¿ç»­æˆåŠŸæ¬¡æ•° | 1æ¬¡ |

ğŸ’¡ **æœ€ä½³å®è·µ**ï¼šé€‚å½“å¢å¤§`failureThreshold`å¯ä»¥é¿å…å› çŸ­æš‚èµ„æºæ³¢åŠ¨å¯¼è‡´çš„é¢‘ç¹æµé‡åˆ‡æ¢ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ã€‚

## ğŸ“ æ³¨æ„äº‹é¡¹

- âš ï¸ åˆå§‹åŒ–æ—¶æ— æ³•è·å–å®¹å™¨èµ„æºé™åˆ¶ä¿¡æ¯ä¼šå¯¼è‡´ç¨‹åºé€€å‡º
- ğŸ”„ CPUå’Œå†…å­˜åŒæ—¶è¶…è¿‡é˜ˆå€¼æ‰ä¼šè§¦å‘éšæœºé€€é¿æœºåˆ¶
- ğŸ›¡ï¸ å½“å¯ç”¨Podæ¯”ä¾‹ä½äºæœ€å°é˜ˆå€¼æ—¶ï¼Œæ‰€æœ‰Podä¼šä¿æŒå¥åº·çŠ¶æ€
- ğŸ” ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹è¿è¡Œç¯å¢ƒï¼Œåœ¨K8sé›†ç¾¤å†…éƒ¨è‡ªåŠ¨ä½¿ç”¨InClusteré…ç½®

## ğŸ“š å‚è€ƒèµ„æ–™

- [Kuberneteså®˜æ–¹æ–‡æ¡£ - Podå¥åº·æ£€æŸ¥](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)
- [metrics-server GitHubä»“åº“](https://github.com/kubernetes-sigs/metrics-server)
- [Go client for Kubernetes](https://github.com/kubernetes/client-go)

